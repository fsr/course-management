{% extends 'new_ui_foo/base.html' %}
{% load i18n %}
{% block content %}

<h1 class="mb-3">{% trans 'Course List' %} - {{ subject.name }}</h1>

{{ subject.description }}

<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">{% trans 'Timeslot' %}</th>
      <th scope="col">{% trans 'Location' %}</th>
      <th scope="col">{% trans 'Status' %}</th>
      <th scope="col">{% trans 'Teachers' %}</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    {% with user.userinformation.course_set.all as courses %}
      {% for course in course_list %}
      <tr>
        <td>
          {% if course.schedule.slots %}
            {{ course.schedule.slots|join:"<br />" }}
          {% else %}
            <p class="text-muted">{% trans 'No dates set yet.' %}</p>
          {% endif %}
        </td>
        <td>
          {% with course.get_distinct_locations as locs %}
            {% if locs %}
              {{ locs|join:", " }}
            {% else %}
              <p class="text-muted">{% trans 'No location set.' %}</p>
            {% endif %}
          {% endwith %}
        </td>
        {% if course.active %}
          {% if course.saturated %}
            <td><span class="badge badge-danger">{% trans 'full' %}</span></td>
          {% else %}
            <td><span class="badge badge-success">{% trans 'available' %}</span></td>
          {% endif %}
        {% else %}
          <td><span class="badge badge-secondary">{% trans 'unavailable' %}</span></td>
        {% endif %}
        <td>{{ course.teacher.all|join:", " }}</td>
        <td><a href="{% url 'course' course.id %}">{% trans 'Info' %}</a></td>
      </tr>
      {% endfor %}
    {% endwith %}
  </tbody>
</table>
{% endblock %}
