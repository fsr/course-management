{% load i18n %}
{% trans "No dates set yet" as tr_noslotsset %}


{% with user.userinformation.course_set.all as courses %}

  {% for course in course_list %}
    <div class="row">
      <div class="column small-12 medium-6">
        <large>
          <a href="{% url 'course' course.id %}">
            {% if course_list_show_subject %}
              {{ course.subject }}
            {% else %}
              {% if course.schedule.slots %}
                {{ course.schedule.slots|join:"<br />" }}
              {% else %}
                {{ tr_noslotsset }}
              {% endif %}
            {% endif %}
          </a>
        </large>
      </div>
      <div class="column small-12 medium-6">
        {% if course_list_show_subject %}
          <p>
            <b>ðŸ“… {% trans "Timeslots" %}:</b>
            {% if course.schedule.slots %}
              {{ course.schedule.slots|join:"<br />" }}
            {% else %}
              {{ tr_noslotsset }}
            {% endif %}
          </p>
        {% endif %}
        <p><b>ðŸŽ“ {% trans "Teachers" %}: </b>{{ course.teacher.all|join:", " }}</p>
        {% if not course_list_show_subject %}
          <p><b>ðŸŽ’ {% trans "Participants" %}: </b>{{ course.participants.count }}/{{ course.max_participants }}</p>
        {% endif %}

        <p>
          <b>ðŸ—º {% trans "Locations" %}:</b>
          {% with course.get_distinct_locations as locs %}
            {% if locs %}
              {{ locs|join:", " }}
            {% else %}
              {% trans "No location set." %}
            {% endif %}
          {% endwith %}
        </p>

        <p>
          {% trans "This course is free for everyone to join." %}
        </p>

        {% if user.is_authenticated and not hide_actions %}

          {% if user.userinformation in course.teacher.all %}
            {% trans "You are teacher" %}.
            {% trans "This course is currently" %} {% if course.active %}{% trans "active" %}{% else %}{% trans "suspended" %} ðŸ’¤{% endif %}.
          {% else %}
            {% if course in courses %}
              {% if course.position_in_queue %}
                {% trans "You are on waiting list at position " %}
                {{ course.position_in_queue }}
              {% else %}
                {% trans "You are enrolled. âœ…" %}
              {% endif %}
              {% include "course/forms/unregister.html" %}
            {% elif not course.active %}
              {% trans "This course is currently" %} {% trans "suspended" %}. ðŸ’¤
            {% else %}
              {% include "course/forms/register.html" %}
            {% endif %}
          {% endif %}
        {% endif %}
				</div>
			</div>
			<div><hr></div>

  {% endfor %}
{% endwith %}
